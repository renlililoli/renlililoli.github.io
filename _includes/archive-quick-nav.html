{% include base_path %}
{% comment %}
  å³ä¾§å¿«é€Ÿå¯¼è§ˆ - æŒ‰æ—¥æœŸ/åˆ†ç±»è·³è½¬ + å¿«é€Ÿé“¾æ¥
  æ ¹æ®å½“å‰é¡µé¢ (blog/publications/essays) æ˜¾ç¤ºä¸åŒå†…å®¹
{% endcomment %}

<aside class="archive__quick-nav">
  <div class="quick-nav__inner">
    <h4 class="quick-nav__title">ğŸ“ å¿«é€Ÿå¯¼è§ˆ</h4>

    {% if page.url contains '/blog/' %}
      {% comment %} Blog: æŒ‰å¹´ä»½è·³è½¬ {% endcomment %}
      {% assign blog_by_year = site.blog | group_by_exp:"post", "post.date | date: '%Y'" %}
      {% assign years_sorted = blog_by_year | sort: "name" | reverse %}
      {% if years_sorted.size > 0 %}
        <div class="quick-nav__section">
          <h5 class="quick-nav__section-title">æŒ‰å¹´ä»½</h5>
          <ul class="quick-nav__list">
            {% for year_group in years_sorted %}
              <li><a href="#year-{{ year_group.name }}">{{ year_group.name }} å¹´</a></li>
            {% endfor %}
          </ul>
        </div>
        <div class="quick-nav__section">
          <h5 class="quick-nav__section-title">è¿‘æœŸæ–‡ç« </h5>
          <ul class="quick-nav__list quick-nav__list--compact">
            {% assign recent_blog = site.blog | sort: "date" | reverse | limit: 8 %}
            {% for post in recent_blog %}
              <li><a href="{{ base_path }}{{ post.url }}" title="{{ post.title }}">{{ post.title | truncate: 20 }}</a></li>
            {% endfor %}
          </ul>
        </div>
      {% endif %}

    {% elsif page.url contains '/publications/' %}
      {% comment %} Publications: æŒ‰åˆ†ç±»è·³è½¬ {% endcomment %}
      {% if site.publication_category %}
        <div class="quick-nav__section">
          <h5 class="quick-nav__section-title">æŒ‰åˆ†ç±»</h5>
          <ul class="quick-nav__list">
            {% for category in site.publication_category %}
              <li><a href="#cat-{{ category[0] }}">{{ category[1].title }}</a></li>
            {% endfor %}
          </ul>
        </div>
      {% endif %}
        <div class="quick-nav__section">
          <h5 class="quick-nav__section-title">è¿‘æœŸè®ºæ–‡</h5>
          <ul class="quick-nav__list quick-nav__list--compact">
            {% assign recent_pubs = site.publications | sort: "date" | reverse | limit: 8 %}
            {% for post in recent_pubs %}
              <li><a href="{{ base_path }}{{ post.url }}" title="{{ post.title }}">{{ post.title | truncate: 20 }}</a></li>
            {% endfor %}
          </ul>
        </div>

    {% elsif page.url contains '/essays/' %}
      {% comment %} Essays: æŒ‰å¹´ä»½ + æ–‡ç« åˆ—è¡¨ {% endcomment %}
      {% assign essays_by_year = site.essays | group_by_exp:"post", "post.date | date: '%Y'" %}
      {% assign essay_years = essays_by_year | sort: "name" | reverse %}
      {% if essay_years.size > 0 %}
        <div class="quick-nav__section">
          <h5 class="quick-nav__section-title">æŒ‰å¹´ä»½</h5>
          <ul class="quick-nav__list">
            {% for year_group in essay_years %}
              <li><a href="#year-{{ year_group.name }}">{{ year_group.name }} å¹´</a></li>
            {% endfor %}
          </ul>
        </div>
      {% endif %}
        <div class="quick-nav__section">
          <h5 class="quick-nav__section-title">å…¨éƒ¨éšç¬”</h5>
          <ul class="quick-nav__list quick-nav__list--compact">
            {% assign sorted_essays = site.essays | sort: "date" | reverse %}
            {% for post in sorted_essays %}
              <li><a href="{{ base_path }}{{ post.url }}" title="{{ post.title }}">{{ post.title | truncate: 18 }}</a></li>
            {% endfor %}
          </ul>
        </div>
    {% endif %}

    {% comment %} é€šç”¨: å¯¼èˆªé“¾æ¥ {% endcomment %}
    <div class="quick-nav__section quick-nav__section--links">
      <h5 class="quick-nav__section-title">å¯¼èˆª</h5>
      <ul class="quick-nav__list">
        {% for link in site.data.navigation.main %}
          <li><a href="{{ base_path }}{{ link.url }}">{{ link.title }}</a></li>
        {% endfor %}
      </ul>
    </div>
  </div>
</aside>
