---
layout: compress
---

{% include base_path %}

<!doctype html>
<html lang="{{ site.locale | slice: 0,2 }}" class="no-js"{% if site.site_theme == "dark" %} data-theme="dark"{% endif %}>
  <head>
    {% include head.html %}
    {% include head/custom.html %}
    <!-- 引入 Mermaid -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  </head>

  <body>

    {% include browser-upgrade.html %}
    {% include masthead.html %}

    {{ content }}

    <div class="page__footer">
      <footer>
        {% include footer/custom.html %}
        {% include footer.html %}
      </footer>
    </div>

    {% include scripts.html %}

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // 初始化 Mermaid
        mermaid.initialize({ startOnLoad: false, theme: 'default', securityLevel: 'loose' });

        // 找到所有可能的 Mermaid 代码块
        document.querySelectorAll('pre > code.language-mermaid, pre > code.mermaid').forEach(codeBlock => {
            const pre = codeBlock.closest('pre');
            if (!pre) return;

            const container = document.createElement('div');
            container.className = 'mermaid';
            container.textContent = codeBlock.textContent.trim(); // 保留纯文本

            pre.parentNode.replaceChild(container, pre);
        });

        // 渲染所有替换后的 Mermaid 图
        mermaid.init(undefined, document.querySelectorAll('.mermaid'));
    });
    </script>


  </body>
</html>
